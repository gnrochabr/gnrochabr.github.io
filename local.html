<!DOCTYPE html>
<html lang="pt-BR" x-data="tourismTemplate()">
<head>
  <meta charset="UTF-8">

  <!-- Viewport correto para mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title x-text="t.title + ' | Turismo Nova Ven√©cia'"></title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- AlpineJS -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Bandeiras -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css"/>

  <style>
    /* ================== SCROLL HORIZONTAL LIMPO ================== */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* ================== IMAGENS DO SLIDER ================== */
    .slider-img {
      width: 260px;          /* melhor propor√ß√£o no mobile */
      height: 190px;
      object-fit: cover;
      flex-shrink: 0;
    }

    @media (min-width: 768px) {
      .slider-img {
        width: 300px;
        height: 210px;
      }
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-800">

<!-- ================= HEADER FIXO ================= -->
<header class="bg-[#0f5132] text-white fixed w-full z-50 shadow-md">
  <div class="flex justify-between items-center px-4 py-3 md:px-10">

    <!-- Logo + T√≠tulo -->
    <a href="index.html" class="flex items-center gap-2 max-w-[75%]">
      <img src="imagens/brasao/brasao_nv.png" alt="Logo" class="w-8 flex-shrink-0">

      <h1 class="text-sm min-[400px]:text-base md:text-xl font-black uppercase tracking-tight leading-tight">
        DESCOBRINDO O AGROTURISMO
      </h1>
    </a>

    <!-- Idiomas -->
    <div class="flex gap-3 flex-shrink-0">
      <button @click="lang = 'pt'" :class="lang === 'pt'? 'opacity-100 scale-110' : 'opacity-60'">
        <span class="fi fi-br"></span>
      </button>

      <button @click="lang = 'en'" :class="lang === 'en'? 'opacity-100 scale-110' : 'opacity-60'">
        <span class="fi fi-us"></span>
      </button>

      <button @click="lang = 'es'" :class="lang === 'es'? 'opacity-100 scale-110' : 'opacity-60'">
        <span class="fi fi-es"></span>
      </button>
    </div>
</header>

<!-- ================= HERO ================= -->
<section class="relative h-[40vh] flex items-center justify-center text-white overflow-hidden pt-16">
  <img :src="hero"
       class="absolute inset-0 w-full h-full object-cover brightness-[0.35]"
       alt="Hero">

  <!-- Gradiente para leitura -->
  <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>

  <div class="relative text-center px-6 max-w-3xl">
    <h2 class="text-3xl md:text-5xl font-black uppercase italic mb-2"
        x-text="t.title"></h2>
    <p class="text-base md:text-lg opacity-90"
       x-text="t.subtitle"></p>
  </div>
</section>

<!-- ================= CONTE√öDO ================= -->
<main class="max-w-6xl mx-auto p-4 md:p-8 -mt-16 relative z-10 bg-white shadow-xl rounded-2xl">

  <div class="grid md:grid-cols-3 gap-8">

    <!-- TEXTO + GALERIA -->
    <div class="md:col-span-2">

      <h3 class="text-xl font-bold text-[#0f5132] mb-3 uppercase tracking-widest border-b pb-2"
          x-text="t.about"></h3>

      <p class="text-gray-600 leading-relaxed text-base"
         x-text="t.description"></p>

      <!-- GALERIA -->
      <h3 class="text-xl font-bold text-[#0f5132] mt-8 mb-4 uppercase tracking-widest"
          x-text="t.gallery"></h3>

      <div class="relative">

        <!-- Slider -->
        <div class="flex overflow-x-auto gap-4 no-scrollbar snap-x snap-mandatory pb-3 scroll-smooth">
          <template x-for="(img, index) in gallery" :key="index">
            <div class="snap-start">
              <img :src="img"
                   @click="openLightbox(index)"
                   class="slider-img rounded-xl shadow-md cursor-pointer
                          hover:brightness-110 transition
                          active:scale-95"
                   alt="Galeria">
            </div>
          </template>
        </div>

        <!-- Indicador visual -->
        <div class="flex gap-1 mt-2">
          <div class="h-1 w-10 bg-[#0f5132] rounded-full opacity-30"></div>
          <div class="h-1 w-3 bg-[#0f5132] rounded-full opacity-10"></div>
        </div>

      </div>
    </div>

    <!-- A√á√ïES -->
    <div class="flex flex-col gap-4">

      <!-- MAPA -->
      <button @click="showMap = true"
              class="w-full bg-[#0f5132] text-white py-5 rounded-2xl font-black
                     shadow-lg flex items-center justify-center gap-3
                     hover:bg-[#1a6b45] transition active:scale-95 uppercase">
        üìç <span x-text="t.location"></span>
      </button>

      <!-- QR CODE -->
      <div class="bg-gray-50 p-6 rounded-2xl border border-dashed border-gray-300 text-center">
        <p class="text-[10px] uppercase font-bold text-gray-400 mb-4 tracking-wide"
           x-text="t.qr"></p>

        <img :src="qr"
             class="mx-auto w-32 bg-white p-2 shadow-sm rounded-lg"
             alt="QR Code">
      </div>
    </div>

  </div>
</main>

<!-- ================= MODAL MAPA ================= -->
<div x-show="showMap"
     x-transition.opacity
     class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm"
     @keydown.escape.window="showMap = false">

  <div class="bg-white rounded-3xl w-full max-w-5xl h-[85vh] flex flex-col shadow-2xl overflow-hidden"
       @click.away="showMap = false">

    <div class="p-4 flex justify-between items-center bg-gray-50 border-b">
      <span class="font-bold text-[#0f5132]" x-text="t.title"></span>
      <button @click="showMap = false"
              class="bg-gray-200 hover:bg-gray-300 w-10 h-10 rounded-full font-bold">
        ‚úï
      </button>
    </div>

    <iframe :src="mapEmbed"
            class="w-full h-full border-0"
            loading="lazy"></iframe>
  </div>
</div>

<!-- ================= LIGHTBOX ================= -->
<div
  x-show="lightbox"
  x-transition.opacity
  @keydown.escape.window="lightbox = false"
  class="fixed inset-0 bg-black/95 z-[200] flex items-center justify-center"
  style="display: none;"
>

  <!-- BOT√ÉO FECHAR -->
  <button
    @click.stop="lightbox = false"
    class="absolute top-6 right-6 text-white text-4xl p-2
           hover:text-gray-300 transition z-[210]">
    ‚úï
  </button>

  <!-- CONTE√öDO -->
  <div
  class="relative w-full max-w-6xl h-full flex items-center justify-between
         px-4 md:px-12 mx-auto"
  @click.self="lightbox = false"
>

  <!-- ANTERIOR -->
  <button
    @click.stop="prev()"
    class="text-white text-5xl md:text-6xl hover:text-[#0f5132] transition p-4">
    ‚Äπ
  </button>

  <!-- IMAGEM -->
  <div class="flex-1 flex items-center justify-center overflow-hidden">
    <img
      :src="gallery[current]"
      class="max-w-full max-h-[80vh] object-contain rounded-xl shadow-2xl"
    >
  </div>

  <!-- PR√ìXIMA -->
  <button
    @click.stop="next()"
    class="text-white text-5xl md:text-6xl hover:text-[#0f5132] transition p-4">
    ‚Ä∫
  </button>

</div>

</div>


<!-- ================= FOOTER FIXO ================= -->
<footer class="fixed bottom-0 left-0 w-full h-12 bg-[#343a40] text-white
               flex items-center justify-center text-sm z-40">
  ¬© 2026 | Prefeitura de Nova Ven√©cia
</footer>

<script src="dados/locais.js"></script>

<script>
function tourismTemplate() {
  const params = new URLSearchParams(window.location.search);
  const id = params.get('id') || 'elefante';

  if (typeof LOCAIS === 'undefined') {
    alert("Erro cr√≠tico: Arquivo de dados n√£o encontrado!");
    return {};
  }

  const data = LOCAIS[id] || LOCAIS['elefante'];

  return {
    lang: 'pt',
    lightbox: false,
    showMap: false,
    current: 0,

    hero: data.hero,
    gallery: data.gallery,
    mapEmbed: data.mapEmbed,
    qr: data.qr,
    texts: data.texts,

    openLightbox(index) {
      this.current = index;
      this.lightbox = true;
    },
    next() {
      this.current = (this.current + 1) % this.gallery.length;
    },
    prev() {
      this.current = (this.current - 1 + this.gallery.length) % this.gallery.length;
    },
    get t() {
      return this.texts[this.lang];
    }
  }
}
</script>

</body>
</html>
